@page
@model project_pharmacie.Areas.Admin.Pages.Personnel.IndexModel
@{
    ViewData["Title"] = "Personnel";
}

<div class="mx-auto max-w-6xl px-4 py-6">
    <div class="mb-6 flex items-center justify-between">
        <div>
            <h1 class="text-2xl font-semibold tracking-tight">Gestion du personnel</h1>
            <p class="text-sm text-zinc-500">Liste simple (mock) pour tester.</p>
        </div>

        <a asp-area="Admin" asp-page="/Personnel/Create"
           class="rounded-xl bg-zinc-900 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800">
            + Ajouter
        </a>
    </div>

    <partial name="Shared/_Flash" />

    <div class="overflow-hidden rounded-2xl border bg-white">
        <table class="min-w-full text-left text-sm">
            <thead class="bg-zinc-50 text-zinc-600">
                <tr>
                    <th class="px-4 py-3 font-medium">Nom</th>
                    <th class="px-4 py-3 font-medium">Email</th>
                    <th class="px-4 py-3 font-medium">Rôle</th>
                    <th class="px-4 py-3 font-medium">Statut</th>
                    <th class="px-4 py-3 font-medium text-right">Actions</th>
                </tr>
            </thead>
            <tbody class="divide-y">
                @foreach (var p in Model.Items)
                {
                    <tr class="hover:bg-zinc-50/50">
                        <td class="px-4 py-3 font-medium text-zinc-900">@p.FullName</td>
                        <td class="px-4 py-3 text-zinc-700">@p.Email</td>
                        <td class="px-4 py-3 text-zinc-700">@p.Role</td>
                        <td class="px-4 py-3">
                            @if (p.IsActive)
                            {
                                <span class="rounded-full bg-emerald-50 px-2 py-1 text-xs font-medium text-emerald-700">Actif</span>
                            }
                            else
                            {
                                <span class="rounded-full bg-zinc-100 px-2 py-1 text-xs font-medium text-zinc-700">Inactif</span>
                            }
                        </td>
                        <td class="px-4 py-3 text-right">
                            <div class="flex justify-end gap-2">
                                <a asp-area="Admin" asp-page="/Personnel/Edit" asp-route-id="@p.Id"
                                   class="rounded-xl border bg-white px-3 py-1.5 text-sm hover:bg-zinc-50">
                                    Modifier
                                </a>

                                <form method="post" asp-page-handler="Delete" class="inline">
                                    <input type="hidden" name="id" value="@p.Id" />
                                    <button type="submit"
                                            class="rounded-xl border border-red-200 bg-red-50 px-3 py-1.5 text-sm text-red-700 hover:bg-red-100"
                                            onclick="return confirm('Confirmer la suppression de @p.FullName ?');">
                                        Supprimer
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
